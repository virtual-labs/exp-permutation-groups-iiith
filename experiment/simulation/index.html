<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>15 Tiles Puzzle - Permutation Groups</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <script src="mobile-detection.js"></script>
</head>
<body class="bg-gray-50 text-gray-800">

  <div class="max-w-5xl mx-auto px-6 pb-16 space-y-12">

    <section class="grid md:grid-cols-3 gap-8">
      <div class="md:col-span-2 h-full">
        <div class="card bg-white p-6 rounded-xl shadow h-full flex flex-col">
          <!-- Game Controls at Top -->
          <div class="flex flex-wrap gap-2 mb-4 pb-4 border-b border-gray-200">
            <button id="newGameBtn" class="btn bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded text-sm">
              New Game
            </button>
            <button id="resetBtn" class="btn bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded text-sm">
              Reset
            </button>
            <button id="undoBtn" class="btn bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded text-sm" disabled>
              Undo
            </button>
            <button id="hintBtn" class="btn bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm">
              Get Hint
            </button>
            <button id="solveBtn" class="btn bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm">
              Show Solution
            </button>
            <div class="ml-auto">
              <select id="difficultySelect" class="bg-white border border-gray-300 rounded px-3 py-2 text-sm">
                <option value="easy">Easy</option>
                <option value="medium" selected>Medium</option>
                <option value="hard">Hard</option>
              </select>
            </div>
          </div>

          <!-- Solution Controls: Only visible during solution -->
          <div id="solutionControls" class="flex items-center gap-3 mb-4 pb-4 border-b border-gray-200 hidden">
            <button id="prevStepBtn" class="btn bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded text-sm">
              Previous Step
            </button>
            <button id="nextStepBtn" class="btn bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded text-sm">
              Next Step
            </button>
            <button id="stopSolvingBtn" class="btn bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded text-sm">
              Stop Solving
            </button>
            <span id="solutionProgress" class="text-sm text-gray-600 ml-2">Step 0 of 0</span>
          </div>
          
          <div class="game-container flex-1">
            <div id="puzzleBoard" class="puzzle-board"></div>
            <div class="game-status mt-4">
              <div class="status-item">
                <span class="status-label">Moves:</span>
                <span id="moveCount" class="status-value">0</span>
              </div>
              <div class="status-item">
                <span class="status-label">Time:</span>
                <span id="timer" class="status-value">00:00</span>
              </div>
              <div class="status-item">
                <span class="status-label">Parity:</span>
                <span id="parity" class="status-value">Even</span>
              </div>
              <div class="status-item">
                <span class="status-label">Distance:</span>
                <span id="manhattanDistance" class="status-value">0</span>
              </div>
            </div>
          </div>
          
          <div id="hint" class="mt-3 p-3 rounded bg-blue-50 text-blue-800 hidden"></div>
        </div>
      </div>
      
      <div class="h-full">
        <div class="card move-history-card bg-white p-6 rounded-xl shadow h-full">
          <h2 class="text-xl font-semibold text-indigo-700 mb-3">Move History</h2>
          <div id="moveLog" class="move-history text-sm">
            <p class="text-gray-600">No moves yet</p>
          </div>
          <div class="mt-3 pt-3 border-t border-gray-200">
            <div class="text-xs text-gray-600">
              <div class="flex justify-between">
                <span>Total Inversions:</span>
                <span id="totalInversions">0</span>
              </div>
              <div class="flex justify-between mt-1">
                <span>Estimated moves to solve:</span>
                <span id="estimatedMoves">0</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Floating Info Button -->
    <div class="floating-button secondary" id="infoButton">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" />
      </svg>
    </div>
    
    <!-- Floating Info Panel -->
    <div class="floating-panel" id="infoPanel">
      <div class="floating-panel-header">
        <h3 class="panel-title">Instructions & Theory</h3>
        <div class="floating-panel-close" id="infoPanelClose">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
          </svg>
        </div>
      </div>
      <div class="floating-panel-content space-y-4">
        <div class="bg-orange-50 p-3 rounded-lg">
          <h3 class="font-semibold text-sm text-orange-800 mb-2">How to Play</h3>
          <div class="text-xs space-y-1 text-gray-600">
            <p>• Click on any tile adjacent to the empty space to slide it</p>
            <p>• Arrange the tiles in numerical order from 1-15, with the empty tile in the bottom right</p>
            <p>• Try to solve the puzzle in as few moves as possible</p>
          </div>
        </div>
        <div class="bg-indigo-50 p-3 rounded-lg">
          <h3 class="font-semibold text-sm text-indigo-800 mb-2">Mathematical Background</h3>
          <div class="text-xs space-y-1 text-gray-600">
            <p>• The 15 Tiles puzzle represents a permutation of the numbers 1-15</p>
            <p>• Each move is a permutation that swaps the empty tile with an adjacent tile</p>
            <p>• Not all initial configurations are solvable - this depends on the parity (evenness/oddness) of the permutation</p>
            <p>• This demonstrates a key property of permutation groups</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Theory Section -->
    <section class="grid md:grid-cols-2 gap-8">
      <div class="card bg-white p-6 rounded-xl shadow">
        <h2 class="text-2xl font-semibold text-indigo-700 mb-3">Permutation Groups</h2>
        <div class="space-y-3 text-sm">
          <p class="text-gray-700">A <strong>permutation</strong> is a rearrangement of objects in a set. For n objects, there are n! possible permutations.</p>
          <p class="text-gray-700">The set of all permutations on n elements forms a <strong>group</strong> called S<sub>n</sub> (the symmetric group), with the operation of composition.</p>
          <div class="bg-gray-100 p-3 rounded mt-4">
            <p class="font-medium text-gray-800 mb-2">Group Properties:</p>
            <ol class="list-decimal pl-6 space-y-1 text-gray-700">
              <li><strong>Closure:</strong> Composing two permutations gives another permutation</li>
              <li><strong>Identity:</strong> There exists an identity permutation that leaves elements unchanged</li>
              <li><strong>Inverse:</strong> Every permutation has an inverse that undoes it</li>
              <li><strong>Associativity:</strong> Composition of permutations is associative</li>
            </ol>
          </div>
        </div>
      </div>
      
      <div class="card bg-white p-6 rounded-xl shadow">
        <h2 class="text-2xl font-semibold text-indigo-700 mb-3">Parity and Solvability</h2>
        <div class="space-y-3 text-sm">
          <p class="text-gray-700">The <strong>parity</strong> (evenness or oddness) of a permutation is determined by the number of transpositions (swaps) needed to create it.</p>
          <div class="bg-gray-100 p-3 rounded">
            <p class="font-medium text-gray-800 mb-2">For the 15 puzzle:</p>
            <ul class="space-y-1 text-gray-700">
              <li>A puzzle instance is solvable if and only if the permutation has even parity</li>
              <li>Each legal move preserves the parity of the permutation</li>
              <li>This is why approximately half of all random starting positions are unsolvable</li>
              <li>This experiment only generates solvable puzzles</li>
            </ul>
          </div>
        </div>
      </div>
    </section>
  </div>

  <script src="Permutations.js"></script>
</body>
</html>